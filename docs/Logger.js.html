<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Logger.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Logger.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict'

const path = require('path')
const fs = require('fs')
const console = require('console')

/**
 * @class Logger
 * @param {object} options
 * @param {boolean} options.consoleLog
 * @param {boolean} options.writeLogOut
 * @param {boolean} options.writeLogErr
 * @param {string} options.logOutPath
 * @param {string} options.logErrPath
 */
const Logger = function (options = {}) {
  // define options
  if (typeof options !== 'object') {
    throw new TypeError('Options must be an object')
  }
  this.options = options
  // define log streams
  const logOutPath = this.options.logOutPath || `${path.dirname(require.main.filename)}/log/log_out.log`
  this.logOutStream = fs.createWriteStream(logOutPath)
  const logErrPath = this.options.logErrPath || `${path.dirname(require.main.filename)}/log/log_err.log`
  this.logErrStream = fs.createWriteStream(logErrPath)
  // define logger
  this.logger = new console.Console(this.logOutStream, this.logErrStream)
}

/**
 * middleware(req, res, next)
 * @param {object} req
 * @param {object} res
 * @param {function} next
 */
Logger.prototype.middleware = function (req, res, next) {
  setImmediate(() => {
    // define request informations string
    const reqInfo = `[${Date.now()}] - ${req.method} - ${req.url}`

    // write request informations on log
    if (this.options.writeLogOut) { this.log(reqInfo) }

    // write request on development console
    this._writeOnConsole(reqInfo)
  })

  next()
}

/**
 * log(content)
 * @param {string} content
 */
Logger.prototype.log = function (content) {
  setImmediate(() => {
    if (this.options.writeLogOut) { this.logger.log(content) }

    // write info on development console
    this._writeOnConsole(content)
  })
}

/**
 * info(content)
 * @param {string} content
 */
Logger.prototype.info = function (content) {
  setImmediate(() => {
    if (this.options.writeLogOut) { this.logger.info(content) }

    // write info on development console
    this._writeOnConsole(content)
  })
}

/**
 * error(content)
 * @param {string} content
 */
Logger.prototype.error = function (content) {
  setImmediate(() => {
    if (this.options.writeLogErr) { this.logger.error(content) }

    // write info on development console
    this._writeOnConsole(content)
  })
}

/**
 * getLogger()
 */
Logger.prototype.getLogger = function () {
  return this.logger
}

/**
 * _writeOnConsole(coontent)
 * @param {string} content
 */
Logger.prototype._writeOnConsole = function (content) {
  if (this.options.consoleLog) {
    console.log(content)
  }
}

module.exports = Logger
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Logger.html">Logger</a></li><li><a href="Server.html">Server</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.4</a> on Tue Aug 08 2017 23:15:06 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
